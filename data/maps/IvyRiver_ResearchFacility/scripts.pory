raw`
    .set LOCALID_MAIN, 4
    .set LOCALID_Q1, 5
    .set LOCALID_Q2, 6
    .set LOCALID_Q3, 7
    .set LOCALID_Q4, 8
    .set LOCALID_EV, 1
`

mapscripts IvyRiver_ResearchFacility_MapScripts{}


//8 people
//1 main quest dude
//3 next quest dudes
//3 randoms
//1 EV trainer

//4 mons
//3 generic
//1 item giver

script IvyRiver_Ranger_FirstQuest{
    //give the quest item
    if (var(VAR_RANGER_INSTITUTE) == 3){

        //first part
        lockall
        faceplayer
        msgbox(format("Hmm? A Recruit? Welcome to the Ivy River Ranger Institute! We're a tad remote - to say the least - but we've made this place our home...and yours too!\p..."))
        release
        delay(8)
        applymovement(LOCALID_MAIN, moves(emote_question_mark))
        waitmovement(0)
        delay(16)
        msgbox(format("Hmm? Ravine has a package for me?"))
        release
        removeitem(ITEM_RANGER_PACKAGE)
        delay(8)
        msgbox(format("{PLAYER} gave the Ranger scientist the Ranger Package."))
        release
        delay(8)    
        applymovement(LOCALID_MAIN, moves(emote_exclamation_mark))
        waitmovement(0)
        delay(16)            
        msgbox(format("Ahh, yes, yes. The supplies have arrived! Excellent!\pExciting stuff indeed.\pYou see, {PLAYER}, the Ivy River Ranger Institute studies Pokémon mega evolutions. To maintain a robust Pokémon ecosystem, we need to know as much as we can about these abnormal evolutions. This has become particularly important since the Mega Sharpedo sighting..."))
        release
        delay(16)
        msgbox(format("Director Ravine sent us a collection of items that induce mega evolution in certain Pokémon. We've been waiting for this for a long time!\pThank you, {PLAYER}!\pAnd am I correct in assuming that this is your first mission?\p...\pIn that case, I officially declare that you've cleared your first mission and I now promote you to the rank of Candidate!"))
        release
        delay(8)

        //promotion
        message(format("{PLAYER} was promoted from Recruit to Candidate!"))
        waitmessage
        call(Common_EventScript_PlayGymBadgeFanfare)

        msgbox(format("I should also give you a reward...hmm, what do we have with us?\pSorry, we're quite a bare-bones setup here."))
        release
        delay(8)
        applymovement(LOCALID_MAIN, moves(emote_exclamation_mark))
        waitmovement(0)
        delay(16)   
        msgbox(format("How about this? Why don't you pick from one of the items Director Ravine sent us?"))
        release
        delay(8)
        
        //goto reward        
        goto(IvyRiver_Ranger_FirstQuest_Reward)
        end
    }


    releaseall
    end
}


script IvyRiver_Ranger_FirstQuest_Reward{
    message(format("Choose carefully! You might not get another one for a while."))
    waitmessage
    dynmultichoice(0,0, TRUE, 21, 0, DYN_MULTICHOICE_CB_NONE, 
        "Medichamite", "Aggronite", "Altarianite", "Lopunnite", "Banettite",
        "Abomasite", "Gyaradosite", "Mawilite", "Gardevoirite", "Galladite",
        "Houndoominite", "Metagrossite", "Scizorite", "Kangaskhanite", "Pinsirite",
        "Sharpedonite", "Ampharosite", "Manectricite", "Absolite"
    )

    if (var(VAR_RESULT) == 0) {setvar(VAR_0x8006, ITEM_MEDICHAMITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 1) {setvar(VAR_0x8006, ITEM_AGGRONITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 2) {setvar(VAR_0x8006, ITEM_ALTARIANITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 3) {setvar(VAR_0x8006, ITEM_LOPUNNITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 4) {setvar(VAR_0x8006, ITEM_BANETTITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 5) {setvar(VAR_0x8006, ITEM_ABOMASITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 6) {setvar(VAR_0x8006, ITEM_GYARADOSITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 7) {setvar(VAR_0x8006, ITEM_MAWILITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 8) {setvar(VAR_0x8006, ITEM_GARDEVOIRITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 9) {setvar(VAR_0x8006, ITEM_GALLADITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 10) {setvar(VAR_0x8006, ITEM_HOUNDOOMINITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 11) {setvar(VAR_0x8006, ITEM_METAGROSSITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 12) {setvar(VAR_0x8006, ITEM_SCIZORITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 13) {setvar(VAR_0x8006, ITEM_KANGASKHANITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 14) {setvar(VAR_0x8006, ITEM_PINSIRITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 15) {setvar(VAR_0x8006, ITEM_SHARPEDONITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 16) {setvar(VAR_0x8006, ITEM_AMPHAROSITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 17) {setvar(VAR_0x8006, ITEM_MANECTRICITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
    if (var(VAR_RESULT) == 18) {setvar(VAR_0x8006, ITEM_ABSOLITE) goto(IvyRiver_Ranger_FirstQuest_Reward_Give)}
}

script IvyRiver_Ranger_FirstQuest_Reward_Give{
    showitemdescription
    msgbox(format("Are you sure?"), MSGBOX_YESNO)
    if (var(VAR_RESULT) == 1){
        hideitemdescription
        giveitem(VAR_0x8006)
        goto(IvyRiver_Ranger_FirstQuest_RewardEnd)
    } else {
        hideitemdescription
        goto(IvyRiver_Ranger_FirstQuest_Reward)
    }
}


script IvyRiver_Ranger_FirstQuest_RewardEnd{

    msgbox(format("Great!\pYou'll be eyeing the rank of Associate next. And for that, you'll need to clear one more mission.\pFor your second mission, I'll have you help out our second floor for a while. We rely heavily on outside help for our research, so you'll be a huge help.\pGo upstairs and help out!"))

    //set vars, quest
    setvar(VAR_RANGER_INSTITUTE, 4)
    subquestmenu(QUEST_MENU_COMPLETE_QUEST, QUEST_POKEMON_RANGER, SUB_QUEST_1)  

    releaseall
    end

}





